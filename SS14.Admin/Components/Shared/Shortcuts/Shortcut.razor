@{
    RegisterShortcode();
}

@code {
    [Parameter, EditorRequired]
    public string Code { get; set; } = null!;

    [Parameter, EditorRequired]
    public Func<Task> Action { get; set; } = null!;

    [CascadingParameter]
    public Dictionary<string, List<Func<Task>>>? ShortcutHandlers { get; set; }

    private void RegisterShortcode()
    {
        var actionList = ShortcutHandlers!.GetValueOrDefault(Code, []);
        actionList.Add(Action);
        ShortcutHandlers![Code] = actionList;
    }
}
